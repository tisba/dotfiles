#!/usr/bin/env bash

set -e

GREEN='\033[0;32m'
NC='\033[0m'

function step() {
  echo -e "${GREEN}â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ${NC} ðŸ”§ ${GREEN}$1${NC}"
}

step "brew Updates"
brew upgrade

step "brew Cleanup"
brew_cache=$(brew --cache)
# -s is for scrubbing the cache
brew cleanup -s --verbose && rm -rf "${brew_cache:?}"/*

step "brew doctor"
brew doctor --quiet

step "Update Rubygems"
gem update --system

step "Updating OMZ"
"$ZSH/tools/upgrade.sh"

step "Updating ruby-install available Rubies"
ruby-install --update

step "Installing/Updating some gems..."
gem install \
  bundler \
  solargraph \
  webrick
