#!/usr/bin/env bash

set -e

GREEN='\033[0;32m'
NC='\033[0m'

function step() {
  echo -e "â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ ðŸ”§ ${GREEN}$1${NC}"
}

step "Homebrew Updates"
brew upgrade
brew upgrade --cask

step "Homebrew Cleanup"
brew_cache=$(brew --cache)
# -s is for scrubbing the cache
brew cleanup -s --verbose && rm -rf "${brew_cache:?}"/*

step "brew doctor"
brew doctor

step "RVM cleanup"
rvm get head
rvm cleanup all

step "Update Rubygems"
gem update --system

step "Updating OMZ"
"$ZSH/tools/upgrade.sh"

step "Updating solargraph"
gem install solargraph
